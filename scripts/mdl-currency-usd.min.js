!function(){"use strict";function t(t){this.element_=t,this.maxIntegers=14,this.maxDecimals=2,this.rawValue="",this.init()}(window.MaterialCurrencyTextfield=t).prototype.Constant_={Pattern:/^\$?((\d*)(\.?\d{0,2})?)?$/,CommaPattern:/\B(?=(\d{3})+(?!\d))/g,FormattedPattern:/^(\$)?(\d{1,3})?(((\,\d{3})+)|(\d*))?(\.{0,1}\d{2})?$/},t.prototype.CssClasses_={LABEL:"mdl-currency-usd__label",INPUT:"mdl-currency-usd__input",IS_DIRTY:"is-dirty",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_INVALID:"is-invalid",IS_UPGRADED:"is-upgraded"},t.prototype.onFocus_=function(t){for(this.element_.classList.add(this.CssClasses_.IS_FOCUSED);-1!==this.input_.value.indexOf(",");)this.input_.value=this.input_.value.replace(",","")},t.prototype.onBlur_=function(t){if(this.element_.classList.remove(this.CssClasses_.IS_FOCUSED),this.updateClasses_(),!this.element_.classList.contains(this.CssClasses_.IS_INVALID)&&this.element_.classList.contains(this.CssClasses_.IS_DIRTY)){for(;-1!==this.input_.value.indexOf(",");)this.input_.value=this.input_.value.replace(",","");var s=this.Constant_.Pattern.exec(this.input_.value);for((void 0===s[3]||0===s[3].length)&&0<this.maxDecimals&&(s[3]=".");s[3].length<=this.maxDecimals;)s[3]+="0";void 0!==s[2]&&"."!==s[2]&&""!==s[2]||(s[2]="0"),this.input_.value=s[2]+s[3],this.rawValue=this.input_.value,this.input_.value=this.input_.value.toString().replace(this.Constant_.CommaPattern,",")}},t.prototype.onInput_=function(t){this.updateClasses_()},t.prototype.onReset_=function(t){this.updateClasses_()},t.prototype.updateClasses_=function(){this.checkDisabled(),this.checkValidity(),this.checkDirty(),this.checkFocus()},t.prototype.checkDisabled=function(){this.input_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},t.prototype.getValue=function(){return this.rawValue},t.prototype.checkFocus=function(){Boolean(this.element_.querySelector(":focus"))?this.element_.classList.add(this.CssClasses_.IS_FOCUSED):this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},t.prototype.checkValidity=function(){this.input_.validity&&(this.input_.validity.valid&&this.isValidLength()&&(this.Constant_.Pattern.test(this.input_.value)||this.Constant_.FormattedPattern.test(this.input_.value))?this.element_.classList.remove(this.CssClasses_.IS_INVALID):this.element_.classList.add(this.CssClasses_.IS_INVALID))},t.prototype.isValidLength=function(){if(0<this.maxIntegers){for(;-1!==this.input_.value.indexOf(",");)this.input_.value=this.input_.value.replace(",","");var t=this.Constant_.Pattern.exec(this.input_.value);if(null===t||void 0!==t&&void 0!==t[2]&&t[2].length>this.maxIntegers)return!1}return!0},t.prototype.checkDirty=function(){this.input_.value&&0<this.input_.value.length?this.element_.classList.add(this.CssClasses_.IS_DIRTY):this.element_.classList.remove(this.CssClasses_.IS_DIRTY)},t.prototype.disable=function(){this.input_.disabled=!0,this.updateClasses_()},t.prototype.enable=function(){this.input_.disabled=!1,this.updateClasses_()},t.prototype.change=function(t){this.input_.value=t||"",this.updateClasses_()},t.prototype.getValue=function(){return this.rawValue},t.prototype.init=function(){this.element_&&(this.label_=this.element_.querySelector("."+this.CssClasses_.LABEL),this.input_=this.element_.querySelector("."+this.CssClasses_.INPUT),this.input_&&(this.boundInputHandler=this.onInput_.bind(this),this.boundFocusHandler=this.onFocus_.bind(this),this.boundBlurHandler=this.onBlur_.bind(this),this.boundResetHandler=this.onReset_.bind(this),this.input_.addEventListener("input",this.boundInputHandler),this.input_.addEventListener("focus",this.boundFocusHandler),this.input_.addEventListener("blur",this.boundBlurHandler),this.input_.addEventListener("reset",this.boundResetHandler),this.onInput_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED),this.input_.hasAttribute("autofocus")&&(this.element_.focus(),this.checkFocus()),this.input_.hasAttribute("maxintegers")&&(this.maxIntegers=parseInt(this.input_.attributes.maxintegers.value,10)),this.input_.hasAttribute("maxdecimals")&&(this.maxDecimals=parseInt(this.input_.attributes.maxdecimals.value,10)),this.element_.classList.contains(this.CssClasses_.IS_DIRTY)&&this.onBlur_()))},componentHandler.register({constructor:t,classAsString:"MaterialCurrencyTextfield",cssClass:"mdl-js-currency-usd",widget:!0})}();